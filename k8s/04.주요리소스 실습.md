# 쿠버네티스 주요 리소스 실습

## 샘플 오브젝트 생성
이전 '03.kubectl 실습'때 만든 config.yaml을 이용하여 아래 명령으로 오브젝트들을 생성합니다. 
```
kubectl apply -f config.yaml
```

## 서비스  
- Headless 서비스 만들기  
아래 내용으로 headless 정의 yaml 파일을 'headless.yaml'로 만듭니다.   
기존 서비스 정의와 달라진 점은 metadata.name을 변경한 것과 spec.clusterIP=None 이 추가된것뿐입니다.   
```
apiVersion: v1
kind: Service
metadata:
  name: config-headless
  namespace: gappa
spec:
  type: ClusterIP
  clusterIP: None
  selector:
    app: config
  ports:
    - name: config
      port: 18080
      targetPort: 18080

```

headless 서비스를 생성합니다.  
```
k apply -f headless.yaml  
```

파드 수를 늘립니다.  
```
$ k scale deploy config --replicas=2
```

curl 파드로 들어가서 nslookup으로 기존 서비스와 headless 서비스를 조회해 봅니다.   
결과값 차이를 보시면 headless 서비스는 파드의 각 주소를 리턴하는걸 알 수 있습니다.   
```
$ k exec -it curl -- sh
nslookup config
nslookup config-headless
```

