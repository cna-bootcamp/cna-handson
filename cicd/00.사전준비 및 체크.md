# 사전준비 및 체크사항
CI/CD를 실습하기 전에 사전에 준비하거나 체크할 사항입니다.  

## minikube 설치와 개발환경 구성

[minikube](https://m.site.naver.com/1rJS6)와 [개발환경 구성](https://m.site.naver.com/1rJRI)을 먼저 모두 완료합니다.  

- NFS Dynamic Provisioning 확인 
  - 파드 실행여부 확인  
    ```
    k get po -n nfs
    ```  
  - 기본 스토리지 클래스 확인
    ```
    k get sc
    ```
    기본 스토리지 클래스는 nfs-retain이어야 합니다.  
    없거나 기본스토리지 클래스가 아니면 [NFS서버 설치와 NFS Dynamic Provisioning 설정](https://happycloud-lee.tistory.com/178)을 참조하여 조치합니다. 
    > 팁: minikube시작 시 기본 스토리지클래스 자동으로 지정하기  
    > minikube는 재시작하면 기본 스토리지 클래스를 standard로 바꿔 버립니다.  
    > 아래 시작 shell로 minikube를 시작하면 시작 시 기본 스토리지 클래스를 nfs-retain으로 할 수 있습니다.  
    > 아래 내용으로 start_minikube.sh 파일을 만들고 chmod +x start_minikube.sh하여 실행파일로 만든 후   
    > minikube 시작할 때 이 shell로 시작하면 됩니다.  
    ```
    #!/bin/bash

    # minikube 시작
    minikube start --driver=none

    # nfs-retain을 기본 StorageClass로 설정
    kubectl patch storageclass nfs-retain -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}'

    # standard StorageClass에서 기본 설정 제거
    kubectl patch storageclass standard -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"false"}}}'

    # StorageClass 상태 확인
    kubectl get storageclass
    ```

